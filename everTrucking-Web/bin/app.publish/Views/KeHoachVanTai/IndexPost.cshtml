@model everTrucking_Web.Code.DTO.listChungTuRequest
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .one {
        margin-top: 32px
    }
</style>

<h1 class="mt-3 mb-3">Kế hoạch vận tải</h1>

        @using (Html.BeginForm("IndexPost", "KeHoachVanTai", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, null, new { @class = "alert alert-danger" })
            @Html.HiddenFor(model => model.IDDanhMucKhachHang, new { @id = "txtIDDanhMucKhachHang" })
            <div class="form-group row">
                <div class="col-sm-6">
                    <label>Từ ngày</label>
                    <div class="input-group date" id="TuNgay">
                        @Html.EditorFor(model => model.TuNgay, new { htmlAttributes = new { @class = "form-control ngay-vn", placeholder = "dd/mm/yyyy" } })
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <i class="fa fa-calendar"></i>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <label>Đến ngày</label>
                    <div class="input-group date" id="DenNgay">
                        @Html.EditorFor(model => model.DenNgay, new { htmlAttributes = new { @class = "form-control ngay-vn", placeholder = "dd/mm/yyyy" } })
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <i class="fa fa-calendar"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12 mb-3 mb-sm-0">
                    <label>Tên khách hàng</label>
                    <select data-live-search="true" class="form-control selectpicker" id="txtTenKhachHang" onchange="validateKhachHang()">
                        @foreach (var item in @ViewBag.ListKhachHang)
                        {
                            <option value=@item.ID>@item.Ten</option>
                        }
                    </select>
                </div>
            </div>
            <button type="submit" class="btn btn-default btn-success" style="background: #4e73df">Tìm kiếm</button>
            <a class="btn btn-default btn-success themmoi" id="themmoi">Thêm mới</a>
        }
        <div class="table-responsive">
            <table class="table table-bordered" id="table" width="100%" height="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Số</th>
                        <th>Ngày lập</th>
                        <th>Loại hình</th>
                        <th>Loại hàng</th>
                        <th>Khách hàng</th>
                        <th>Địa điểm nâng cont</th>
                        <th>Ngày nâng</th>
                        <th>Địa điểm hạ cont</th>
                        <th>Ngày hạ</th>
                        <th>Địa điểm đóng hàng</th>
                        <th>Ngày đóng</th>
                        <th>Địa điểm trả hàng</th>
                        <th>Ngày trả</th>
                        <th style="">Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in @ViewBag.ListKeHoachVanTai)
                    {
                        <tr>
                            <td id="row_@item.ID">@item.So</td>
                            <td>@item.NgayLap</td>
                            <td>@item.TenLoaiHinh</td>
                            <td>@item.TenLoaiHang</td>
                            <td>@item.TenDanhMucKhachHang</td>
                            <td>@item.TenDanhMucDiaDiemNangCont</td>
                            <td>@item.NgayNangCont</td>
                            <td>@item.TenDanhMucDiaDiemHaCont</td>
                            <td>@item.NgayHaCont</td>
                            <td>@item.TenDanhMucDiaDiemDongHang</td>
                            <td>@item.NgayDongHang</td>
                            <td>@item.TenDanhMucDiaDiemTraHang</td>
                            <td>@item.NgayTraHang</td>
                            <td style="text-align:center">
                                @Html.ActionLink("Sửa", "Edit", new { id = item.ID }, new { @class = "sua" }) |

                                @Html.ActionLink("Xóa", "Delete", new { id = item.ID }, new { onclick = "return confirm('Bạn chắc chắn muốn xóa bản ghi này?');" })
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

<script>
    document.querySelector(".sua").addEventListener('click', (e) => {
        e.preventDefault();
        console.log(123)
        $('#myModal2').modal({
            show: true
        });
    })
    document.querySelector(".themmoi").addEventListener('click', (e) => {
        e.preventDefault();
        console.log(123)
        $('#myModal2').modal({
            show: true
        });
    })
</script>




<script>

  
</script>
@section scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.6.0/cleave.min.js"></script>
    <script type="text/javascript">

    function validateKhachHang() {
        var idDn = document.getElementById("txtMaKhachHang").value;
        document.getElementById("txtIDDanhMucChungTu").value = idDn;
    }

    $(document).ready(function () {
        $('#TuNgay').datepicker({ format: 'dd/mm/yyyy', language: 'vi' });
        //
        $('#DenNgay').datepicker({ format: 'dd/mm/yyyy', language: 'vi' });
        //
        var cleave = new Cleave('.ngay-vn', {
            date: true,
            delimiter: '/',
            datePattern: ['d', 'm', 'Y']
        });
    });


    </script>
}